<!DOCTYPE html>
<html>
<head>
<title>Redirecting...</title>
</head>
<body>

<h2 id="txt">Please wait 5 seconds...</h2>

<script>
const code = new URLSearchParams(location.search).get("c");
const txt = document.getElementById("txt");

if(!code){
  txt.innerText = "Invalid link";
  throw "";
}

const DB =
"https://linksnapp-405bb-default-rtdb.asia-southeast1.firebasedatabase.app/links/"+code+".json";

setTimeout(() => {
  fetch(DB)
  .then(r => r.json())
  .then(d => {
    if(!d || !d.url){
      txt.innerText = "Link not found or expired";
      return;
    }
    location.href = d.url;
  });
}, 5000); // 5 seconds delay
</script>

</body>
</html>

